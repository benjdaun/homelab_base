apiVersion: gateway.networking.k8s.io/v1beta1
kind: HTTPRoute
metadata:
  name: argo-http
  namespace: argocd
spec:
  parentRefs:
    - name: traefik-gateway
      namespace: kube-system
  hostnames:
    - argo.beavertech.xyz
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
      - name: argocd-server
        port: 80

---

#apiVersion: gateway.networking.k8s.io/v1alpha2
#kind: GRPCRoute
#metadata:
#  name: my-grpc-route
#  namespace: default
#spec:
#  parentRefs:
#    - name: my-gateway
#  hostnames:
#    - argo.beavertech.xyz
#  rules:
#    - matches:
#        - method:
#            type: Exact
#            value: "my.grpc.Service/MyMethod"
#      backendRefs:
#        - name: my-grpc-service
#          port: 50051
#